# 股票研究技能 - 模块化设计说明

## 概述
股票研究技能采用了模块化设计，将不同功能分离到独立的模块中，提高代码的可维护性和可扩展性。

## 目录结构

```
stocktourch/
├── core/                 # 核心分析器
│   ├── stock_analyzer.py      # 股票分析器
│   ├── financial_analyzer.py  # 财务分析器
│   ├── market_analyzer.py     # 大盘分析器
│   └── ai_market_analyzer.py  # AI市场分析器
│
├── utils/                # 工具模块
│   ├── config.py             # 配置
│   ├── utils.py              # 工具函数
│   ├── cache_manager.py      # 缓存管理
│   └── output_formatter.py   # 输出格式化
│
├── report/               # 财报模块
│   ├── cninfo_downloader.py # 巨潮资讯下载器
│   └── report_reader.py     # PDF读取器
│
├── web/                 # 网络模块
│   └── web_crawler.py       # 网页爬虫
│
├── executor/             # 执行器
│   └── skill_executor.py   # 技能执行器
│
└── assets/              # 资源文件
    ├── stocks.json
    └── financial_analyst_prompt.txt
```

## 模块说明

### 1. core/ - 核心分析器
- **stock_analyzer.py**: 股票数据分析和计算核心逻辑
- **financial_analyzer.py**: 财务数据分析
- **market_analyzer.py**: 大盘分析
- **ai_market_analyzer.py**: AI驱动的市场分析

### 2. utils/ - 工具模块
- **config.py**: 配置管理
- **utils.py**: 通用工具函数
- **cache_manager.py**: 缓存管理
- **output_formatter.py**: 输出格式化

### 3. report/ - 财报模块
- **cninfo_downloader.py**: 巨潮资讯网财报下载
- **report_reader.py**: PDF财报内容提取

### 4. web/ - 网络模块
- **web_crawler.py**: 财经网站爬虫

### 5. executor/ - 执行器
- **skill_executor.py**: 命令解析和功能调度

## 设计优势

### 1. 高内聚低耦合
- 每个模块都有明确的职责边界
- 模块间依赖关系清晰
- 便于单独测试和维护

### 2. 可扩展性
- 新功能可以通过新增模块实现
- 现有模块的改动不会影响其他模块
- 支持插件式功能扩展

### 3. 可维护性
- 代码结构清晰，易于理解和修改
- 问题定位更加精准
- 便于团队协作开发

## 使用方式
- 通过 `run_skill.py` 统一入口执行
- 支持多种输出格式(text/json/csv)
- 支持缓存配置(--no-cache, --cache-ttl)
- 支持多种分析类型(technical/fundamental/industry等)

## 扩展指南
如需添加新功能，建议：
1. 确定新功能的职责边界
2. 在适当的模块目录中创建新文件
3. 在适当的地方添加依赖
4. 更新文档说明